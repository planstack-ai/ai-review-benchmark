{
  "case_id": "NOTIFY_002",
  "category": "notification",
  "axis": "spec_alignment",
  "name": "alert_timestamp_before_send",
  "difficulty": "medium",
  "expected_detection": true,
  "bug_description": "Alert timestamp updated before notification is sent - if sending fails, alert is marked as sent",
  "bug_anchor": "$product->update(['last_low_stock_alert_at' => now()])",
  "correct_implementation": "Update timestamp after successful notification send",
  "severity": "medium",
  "tags": [
    "notification",
    "alert",
    "ordering"
  ],
  "must_find": [
    {
      "type": "ordering_bug",
      "description": "Timestamp updated before notification sent, causing silent failures"
    }
  ],
  "decoy_issues": [
    {
      "type": "minor",
      "description": "Cooldown check uses >= instead of >"
    }
  ],
  "bug_anchor_verified": true,
  "evaluation_mode": "semantic",
  "has_expected_critique": true
}
