{
  "case_id": "logic_bug_11",
  "category": "logic_bug",
  "difficulty": "medium",
  "expected_detection": true,
  "bug_description": "mark_points_granted! の呼び出しが return 文の後にあるため到達不能コードになっている。points を返した時点でメソッドが終了するため、ポイント付与済みフラグが設定されず、再実行時に重複付与される。",
  "bug_location": "impl.rb:15-16",
  "correct_implementation": "grant_points(points)\n@order.mark_points_granted!\npoints",
  "tags": ["unreachable_code", "order_of_operations", "duplicate_processing"],
  "notes": "Ruby ではメソッドの最後の式が戻り値になるため、return を明示しない場合でも途中の式で処理が終わることはない。しかしこのコードは points が戻り値として意図されており、その後のコードは実行されない。"
}
