# クーポンコード適用

## 要件

1. クーポンコードを注文に適用する
2. クーポンの有効性を検証する
3. 割引額を注文に反映する

## 使用すべき既存実装

- `Coupon.find_by_code(code)` - コードからクーポンを検索
- `Coupon#valid_for?(order)` - 注文に対してクーポンが有効か検証（期限、最低金額、使用回数すべてチェック）
- `Coupon#discount_amount(order)` - 割引額を計算
- `Order#apply_coupon(coupon)` - クーポンを注文に適用

## 注意事項

- 有効性検証は既存の `valid_for?` メソッドを必ず使用すること
- 独自に有効性チェックを実装しないこと（ロジックの重複を避ける）
