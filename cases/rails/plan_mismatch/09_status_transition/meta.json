{
  "case_id": "plan_mismatch_09",
  "category": "plan_mismatch",
  "difficulty": "medium",
  "expected_detection": true,
  "bug_description": "cancellable?メソッドを使わずpending?のみをチェックしている。Planではconfirmedからもキャンセル可能と明記されているが、その条件が漏れている。",
  "bug_location": "impl.rb:10",
  "correct_implementation": "raise OrderNotCancellableError unless @order.cancellable?  # または @order.cancel! を使用",
  "tags": ["status", "state_machine", "incomplete_condition"],
  "notes": "既存のcancel!メソッドを使えばすべて解決するが、独自実装により条件漏れが発生。"
}
